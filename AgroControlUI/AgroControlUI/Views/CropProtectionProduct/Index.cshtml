@model List<AgroControlUI.DTOs.CropProtectionProducts.CropProtectionProductDto>

<link rel="stylesheet" href="~/css/indexList.css">

<h1 class="blue">Środki ochrony roślin</h1>

<div class="wrapper">
    <p>
        <a asp-action="Create" class="add-btn btn"><img src="~/images/plus-solid.svg" />Dodaj środek ochrony roślin</a>
    </p>
    <div class="table">
        <div class="row header blue">
            <div class="cell">
                Nazwa środka ochrony roślin
            </div>
            <div class="cell">
                Producent
            </div>
            <div class="cell">
                Kategorie
            </div>
            <div class="cell">
                Skład
            </div>
            <div class="cell">
                Rośliny
            </div>
            <div class="cell">
                Akcje
            </div>
        </div>
        @foreach (var cropProtectionProduct in Model)
        {
            <div class="row">
                <div class="cell" data-title="Nazwa środka ochrony roślin">
                    @cropProtectionProduct.Name
                </div>
                <div class="cell" data-title="Producent">
                    @cropProtectionProduct.ProducerName
                </div>
                <div class="cell" data-title="Kategorie">
                    @foreach (var cropProtectionProductCategory in cropProtectionProduct.cropProtectionProductCategories)
                    {
                        @($"{cropProtectionProductCategory.Name}")
                        @if (cropProtectionProductCategory != cropProtectionProduct.cropProtectionProductCategories.Last())
                        {
                            @(", ")
                        }
                    }
                </div>
                <div class="cell" data-title="Skład">
                    @foreach (var cropProtectionProductComponent in cropProtectionProduct.cropProtectionProductComponents)
                    {
                        @($"{cropProtectionProductComponent.ActiveIngredientName} ({cropProtectionProductComponent.Concentration}g)")
                        @if (cropProtectionProductComponent != cropProtectionProduct.cropProtectionProductComponents.Last())
                        {
                            @(", ")
                        }
                    }
                </div>
                <div class="cell" data-title="Rośliny">
                    @foreach (var cropProtectionProductCrop in cropProtectionProduct.cropProtectionProductCrops)
                    {
                        @($"{cropProtectionProductCrop.Name}")
                        @if (cropProtectionProductCrop != cropProtectionProduct.cropProtectionProductCrops.Last())
                        {
                            @(", ")
                        }
                    }
                </div>
                <div class="cell" data-title="Akcje">
                    <div class="action-buttons">
                        <a asp-action="Details" asp-route-id="@cropProtectionProduct.Id" class="btn cancel-btn"><img src="~/images/details.svg" />Edytuj</a>
                        <a asp-action="Edit" asp-route-id="@cropProtectionProduct.Id" class="btn edit-btn"><img src="~/images/edit.svg" />Edytuj</a>
                        <button type="button" class="delete-btn" data-bs-toggle="modal" data-bs-target="#deleteModal" onclick="setDeleteUrl('@Url.Action("DeleteConfirmed", new { id = cropProtectionProduct.Id })')">
                            <img src="~/images/delete.svg" />Usuń
                        </button>
                    </div>
                </div>
            </div>
        }

    </div>
</div>